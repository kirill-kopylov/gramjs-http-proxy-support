# üìã –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ñ–æ—Ä–∫–∞

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ ‚úÖ

**–§–∞–π–ª: `package.json`**
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ –∏–º—è: `telegram` ‚Üí `@kirill-kopylov/telegram`
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω repository URL –Ω–∞ —Ç–≤–æ–π GitHub
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: `http-proxy`, `socks-proxy`, `proxy-support`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã npm —Å–∫—Ä–∏–ø—Ç—ã:
  - `npm run publish:npm` - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ npm
  - `npm run version:patch/minor/major` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
  - `npm run prepare:dist` - —Å–±–æ—Ä–∫–∞ –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### 2. –°–∫—Ä–∏–ø—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ‚úÖ

**–§–∞–π–ª: `scripts/publish.js`**
- ‚úÖ –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ `publish_npm.js`
- ‚úÖ –ü—É–±–ª–∏–∫—É–µ—Ç —Ç–æ–ª—å–∫–æ Node.js –≤–µ—Ä—Å–∏—é (–±–µ–∑ browser bundle)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ browser-specific —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å —Ñ–ª–∞–≥–æ–º `--access public`

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚úÖ

**–§–∞–π–ª: `README.md`**
- ‚úÖ –£–∫–∞–∑–∞–Ω–æ —á—Ç–æ —ç—Ç–æ —Ñ–æ—Ä–∫ —Å HTTP proxy support
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å `@kirill-kopylov/telegram`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "What's Different in This Fork"
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ import –ø—Ä–∏–º–µ—Ä—ã

**–§–∞–π–ª: `QUICK_START.md`** (–Ω–æ–≤—ã–π)
- ‚úÖ –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- ‚úÖ –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –ø–µ—Ä–≤–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ Troubleshooting

**–§–∞–π–ª: `PUBLISHING.md`** (–Ω–æ–≤—ã–π)
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –≤–µ—Ä—Å–∏–π
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å upstream
- ‚úÖ –ü–æ–ª–µ–∑–Ω—ã–µ npm –∫–æ–º–∞–Ω–¥—ã

### 4. NPM –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ

**–§–∞–π–ª: `.npmignore`**
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ TypeScript
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã —Ç–µ—Å—Ç—ã –∏ –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –¢–æ–ª—å–∫–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –ø–æ–ø–∞–¥—ë—Ç –≤ npm

## –ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

- ‚úÖ –í–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ gramjs —Å–æ—Ö—Ä–∞–Ω—ë–Ω
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º (–∫—Ä–æ–º–µ –∏–º–µ–Ω–∏ –ø–∞–∫–µ—Ç–∞)
- ‚úÖ –¢–∞ –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- ‚úÖ –¢–µ –∂–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –¢–∞ –∂–µ TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞

**–¢–≤–æ–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (HTTP proxy support):**
- `gramjs/extensions/PromisedNetSockets.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_connectViaHttpProxy()`
- `gramjs/network/connection/TCPMTProxy.ts` - –¥–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø `HttpProxyType`
- `__tests__/httpProxy.spec.ts` - —Ç–µ—Å—Ç—ã –¥–ª—è HTTP –ø—Ä–æ–∫—Å–∏
- `examples/httpProxyExample.ts` - –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## –ü–ª–∞–Ω –ø–µ—Ä–≤–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### –ü–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç—ã –∑–∞–ª–æ–≥–∏–Ω–µ–Ω –≤ npm
npm whoami

# 2. –ü—Ä–æ–≥–æ–Ω–∏ —Ç–µ—Å—Ç—ã
npm test

# 3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è
npm run prepare:dist
```

### –ü—É–±–ª–∏–∫–∞—Ü–∏—è:

```bash
# 4. –ö–æ–º–º–∏—Ç –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git add .
git commit -m "feat: add HTTP proxy support and prepare for npm publication"
git push origin master

# 5. –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
npm run publish:npm
```

### –ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:

```bash
# 6. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–∞–∫–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
npm view @kirill-kopylov/telegram

# 7. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ
mkdir test-install && cd test-install
npm init -y
npm install @kirill-kopylov/telegram
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ gramjs:

```bash
# –í –∫–∞–∂–¥–æ–º –ø—Ä–æ–µ–∫—Ç–µ
npm uninstall telegram
npm install @kirill-kopylov/telegram
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤:

```javascript
// –ë—ã–ª–æ:
import { TelegramClient } from "telegram";

// –°—Ç–∞–ª–æ:
import { TelegramClient } from "@kirill-kopylov/telegram";
```

**–í–∞–∂–Ω–æ:** –í–°–Å –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–ê–ö –ñ–ï!

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º

```bash
# –ö–æ–≥–¥–∞ –≤–Ω–æ—Å–∏—à—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:
npm run version:patch  # –∏–ª–∏ minor/major
git push origin master --tags
npm run publish:npm
```

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º

```bash
# –û–¥–∏–Ω —Ä–∞–∑:
git remote add upstream https://github.com/gram-js/gramjs.git

# –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏:
git fetch upstream
git merge upstream/master
# –†–∞–∑—Ä–µ—à–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –µ—Å–ª–∏ –µ—Å—Ç—å
npm run version:minor
git push origin master --tags
npm run publish:npm
```

## –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π

- [ ] –ó–∞–ª–æ–≥–∏–Ω–µ–Ω –≤ npm (`npm whoami`)
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (`npm test`)
- [ ] –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è (`npm run prepare:dist`)
- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- [ ] README.md –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] package.json —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è `@kirill-kopylov/telegram`
- [ ] –ì–æ—Ç–æ–≤ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏! –ó–∞–ø—É—Å—Ç–∏: `npm run publish:npm`

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ—Ç–µ
npm view @kirill-kopylov/telegram

# –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
npm pack  # —Å–æ–∑–¥–∞—Å—Ç .tgz —Ñ–∞–π–ª –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ
cd dist && npm pack --dry-run

# –£–¥–∞–ª–∏—Ç—å –≤–µ—Ä—Å–∏—é (—Ç–æ–ª—å–∫–æ 72 —á–∞—Å–∞ –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
npm unpublish @kirill-kopylov/telegram@x.x.x
```

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. **–ü–µ—Ä–≤–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è** - —Å–ª–µ–¥—É–π QUICK_START.md
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - —É—Å—Ç–∞–Ω–æ–≤–∏ –≤ —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –¥–æ–±–∞–≤–ª—è–π —Ñ–∏—á–∏, –æ–±–Ω–æ–≤–ª—è–π –≤–µ—Ä—Å–∏–∏
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –º–µ—Ä–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ upstream

---

**–ì–æ—Ç–æ–≤–æ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏!** üöÄ